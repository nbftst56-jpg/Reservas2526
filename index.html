<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Controle de Reservas - Temporada 2025/2026</title> 

  <meta name="theme-color" content="#007bff"/>
  <link rel="manifest" href="manifest.json">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" rel="stylesheet"> 
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"> 
  
  
  <link rel="stylesheet" href="styles.css"> 
</head>

<body>
  <aside class="sidebar">
    <h1>Controle de Reservas</h1> 
    <div class="sidebar-content">
        <div class="data-management">
            <h3>Gerenciamento de Dados:</h3> 
            <div class="dropdown">
    
              <button class="dropbtn"><i class="bi bi-hdd-stack"></i> Gerenciar Dados Locais</button> 
              <div class="dropdown-content">
                <button id="salvarLocalmenteBtn"><i class="bi bi-save"></i> Salvar Localmente</button> 
                <button id="limparDadosLocaisBtn"><i class="bi bi-trash"></i> Limpar Dados Locais</button> 
                <div style="padding: 12px 16px;
 background-color: #f1f1f1;"> 
                  <label for="autoBackupToggle" style="display: flex;
 align-items: center; cursor: pointer;"> 
                    <input type="checkbox" id="autoBackupToggle" style="margin-right: 10px;"> 
                    Backup automático
                  </label> 
                </div>
              </div>
    
            </div> 
            <hr> 
            <div class="file-operations">
              <div class="dropdown">
                <button class="dropbtn"><i class="bi bi-arrow-down-up"></i> Importar / Exportar</button> 
                <div class="dropdown-content">
             
                  <h4 style="padding: 10px 16px; margin: 0;
 background: #eee;">Importar</h4> 
                  <button id="importarBackupCompletoBtn"><i class="bi bi-file-earmark-zip"></i> Importar Backup Completo (.json)</button> 
                  <button id="importarClientesBtn"><i class="bi bi-file-earmark-person"></i> Importar Apenas Clientes (.txt)</button> 
                  
                  <hr style="margin: 5px 0;"> 
          
                  <h4 style="padding: 10px 16px; margin: 0;
 background: #eee;">Exportar</h4> 
                  <button id="exportarBackupCompletoBtn"><i class="bi bi-file-earmark-zip-fill"></i> Exportar Backup Completo (.json)</button> 
                  <button id="exportarClientesBtn"><i class="bi bi-person-lines-fill"></i> Exportar Apenas Clientes (.txt)</button> 
                  <button id="exportarReservasTXTBtn"><i class="bi bi-file-earmark-text"></i> Exportar Apenas Reservas (.txt)</button> 
                  <button id="exportarFinanceiroJSONBtn"><i class="bi bi-cash-stack"></i> Exportar Apenas 
 Financeiro (.json)</button> 
                </div>
              </div>
              <button id="segurancaBtn"><i class="bi bi-unlock-fill"></i> Segurança Desativada</button> 
              <input type="file" id="importarBackupCompletoInput" accept=".json" style="display: none;" aria-label="Importar Backup Completo"> 
              <input type="file" id="importarClientesInput" accept=".txt" style="display: none;" aria-label="Importar Apenas Clientes"> 
     
            </div> 
          </div>

          <hr> 

          <div class="controls">
            <h3>Controles e Filtros:</h3> 
            <button id="ajudaBtn"><i class="bi bi-question-circle"></i> Ajuda & Legenda</button> 
            <button id="gerarRelatorioBtn"><i class="bi bi-bar-chart-line"></i> Relatório de Ocupação</button> 
            
 <button id="gerenciarFinanceiroBtn" disabled><i class="bi bi-cash-coin"></i> Gerenciar Financeiro</button> 
            <button id="gerarRelatorioFinanceiroBtn"><i class="bi bi-graph-up"></i> Relatório Financeiro</button> 
    
            <hr> 
            <button id="verControleLimpezaBtn"><i class="bi bi-check2-square"></i> Controle de Limpeza</button> 
            <button id="agendarLimpezaExtraBtn"><i class="bi bi-magic"></i> Agendar Limpeza Extra</button> 
            
            <div 
 class="filter-group"> 
              <div style="display: flex; align-items: flex-start;
 gap: 10px; margin-bottom: 15px;"> 
                <div style="flex-grow: 1;">
                  <label for="clienteSelect">Filtrar por Cliente:</label> 
                  <select id="clienteSelect">
                    <option value="">-- Todos os Clientes --</option> 
              
                 </select> 
                </div>
                <div class="dropdown" style="width: auto;">
                  <button class="dropbtn" style="width: auto;" aria-label="Ações do Cliente"><i class="bi bi-gear-fill"></i></button> 
                  <div class="dropdown-content">
                
                     <button id="adicionarClienteBtn"><i class="bi bi-person-plus"></i> Adicionar Novo Cliente</button> 
                    <button id="editarClienteBtn" disabled><i class="bi bi-pencil"></i> Editar Selecionado</button> 
                    <button id="removerClienteBtn" disabled><i class="bi bi-person-dash"></i> Remover Selecionado</button> 
                  </div>
                </div>
    
               </div> 
              <div class="checkbox-group">
                <input type="checkbox" id="filtroResvCheckbox"> 
                <label for="filtroResvCheckbox" style="display: inline;
 margin-bottom: 0;">Apenas clientes com status "Resv"</label> 
              </div>
            </div>
          </div>
    </div>
  </aside>

  <main class="content">
    <button id="menu-toggle-btn" class="menu-toggle" aria-label="Abrir menu"><i class="bi bi-list"></i></button> 
    <div id="overlay"></div> 
    
    <div class="navegacao-mes">
        <button id="mesAnteriorBtn"><i class="bi bi-chevron-left"></i> <span class="texto-botao">Anterior</span></button> 
        <h2 id="mesAtualDisplay"></h2> 
   
         <button id="mesProximoBtn" style="flex-direction: row-reverse;"><span class="texto-botao">Próximo</span> <i class="bi bi-chevron-right"></i></button> 
    </div>
    <div id="calendario-container"></div> 
  </main>

  <div id="tooltip"></div> 
  
  <div id="modalAjuda" class="modal-overlay" style="display: none;">
    <div class="modal-content">
      <span class="modal-close-btn">&times;</span> 
      <h3><i class="bi bi-palette"></i> Legenda</h3> 
      <ul style="list-style: none;
 padding: 0;"> 
        <li style="display: flex; align-items: center; margin-bottom: 8px;"><span style="width: 20px; height: 20px;
 margin-right: 10px; border-radius: 4px; background-color: var(--cor-entrada);"></span> Entrada</li> 
        <li style="display: flex; align-items: center;
 margin-bottom: 8px;"><span style="width: 20px; height: 20px; margin-right: 10px; border-radius: 4px;
 background-color: var(--cor-saida);"></span> Saída</li> 
        <li style="display: flex; align-items: center; margin-bottom: 8px;"><span style="width: 20px;
 height: 20px; margin-right: 10px; border-radius: 4px; background: linear-gradient(135deg, var(--cor-saida) 50%, var(--cor-entrada) 50%);"></span> Entrada/Saída</li> 
        <li style="display: flex;
 align-items: center; margin-bottom: 8px;"><span style="width: 20px; height: 20px; margin-right: 10px; border-radius: 4px;
 background-color: var(--cor-hospedado);"></span> Hospedado</li> 
      </ul>
      <hr> 
      <h3><i class="bi bi-mouse"></i> Lógica de Cliques</h3> 
      <ul>
        <li>1º Clique → <i class="bi bi-box-arrow-in-right icon-entrada"></i> Marca como Entrada</li> 
        <li>2º Clique → <i class="bi bi-check-circle-fill icon-hospedado"></i> Marca como Hospedado</li> 
        <li>3º Clique → <i class="bi bi-box-arrow-left icon-saida"></i> Marca como Saída</li> 
        <li>4º Clique → ⚪ Limpa a marcação do cliente atual</li> 
 
       </ul> 
      <p><strong>Observação:</strong> Para limpar todas as marcações de um dia (de todos os clientes), use o botão direito do mouse ou dê um duplo clique no dia.</p> 
    </div>
  </div>

  <div id="modalRelatorio" class="modal-overlay" style="display: none;">
    <div class="modal-content">
      <span class="modal-close-btn">&times;</span> 
      <h3><i class="bi bi-bar-chart-line"></i> Relatório de Ocupação</h3> 
      <div class="modal-tabs">
        <button class="tab-btn active" data-target="relatorioConteudoTexto">Resumo em Texto</button> 
        <button 
 class="tab-btn" data-target="relatorioConteudoVisual">Visualização em Calendário</button> 
      </div>
      <div id="relatorioConteudoTexto" class="report-content active"></div> 
      <div id="relatorioConteudoVisual" class="report-content"></div> 
      <div style="text-align: right;
 margin-top: 20px;"> 
        <button class="print-btn" ><i class="bi bi-printer"></i> Imprimir</button> 
      </div>
    </div>
  </div>

  <div id="modalCliente" class="modal-overlay" style="display: none;">
    <div class="modal-content">
      <span class="modal-close-btn">&times;</span> 
      <h3 id="modalClienteTitulo">Adicionar Novo Cliente</h3> 
      <form id="formCliente">
        <input type="hidden" id="clienteOriginalNomeInput"> 
        <div style="margin-bottom: 15px;"><label for="clienteNomeInput">Nome:</label><input type="text" id="clienteNomeInput" required style="width: 100%;
 padding: 8px; font-size: 16px; box-sizing: border-box;"></div> 
        <div style="margin-bottom: 15px;"><label for="clienteWhatsInput">WhatsApp (com DDI):</label><input type="text" id="clienteWhatsInput" style="width: 100%;
 padding: 8px; font-size: 16px; box-sizing: border-box;"></div> 
        <div style="margin-bottom: 15px;"><label for="clientePaisInput">País:</label><input type="text" id="clientePaisInput" style="width: 100%;
 padding: 8px; font-size: 16px; box-sizing: border-box;"></div> 
        <div style="margin-bottom: 15px;"><label for="clienteTempoInput">Temporada:</label><input type="text" id="clienteTempoInput" style="width: 100%;
 padding: 8px; font-size: 16px; box-sizing: border-box;"></div> 
        <div style="margin-bottom: 15px;"><label for="clienteUnidadeInput">Unidade Preferencial:</label><input type="text" id="clienteUnidadeInput" style="width: 100%;
 padding: 8px; font-size: 16px; box-sizing: border-box;"></div> 
        <div style="margin-bottom: 15px;"><label for="clienteStatusInput">Status (Resv/Cons/Outr):</label><input type="text" id="clienteStatusInput" style="width: 100%;
 padding: 8px; font-size: 16px; box-sizing: border-box;"></div> 
        <button type="submit" id="salvarClienteBtn" style="width: 100%; padding: 12px;
 font-size: 18px; background-color: #007bff; color: white; border: none; border-radius: 5px;
 cursor: pointer;">Salvar Cliente</button> 
      </form>
    </div>
  </div>

  <div id="modalFinanceiro" class="modal-overlay" style="display: none;">
      <div class="modal-content">
          <span class="modal-close-btn">&times;</span> 
          <h3 id="modalFinanceiroTitulo"><i class="bi bi-cash-coin"></i> Dados Financeiros da Reserva</h3> 
          <div id="infoReservaFinanceiro" style="margin-bottom: 15px;
 padding: 10px; background: #f0f0f0; border-radius: 5px;"></div> 
          <div id="listaReservasFinanceiro"></div> 
          <form id="formFinanceiro" style="display: none;">
              <input type="hidden" id="reservaIdInput"> 
              <div class="form-financeiro-grid">
                  <div><label for="valorDiariaInput">Valor da Diária (R$)</label><input type="number" id="valorDiariaInput" step="0.01" min="0"></div> 
              
                 <div><label for="valorSinalInput">Valor do Sinal (R$)</label><input type="number" id="valorSinalInput" step="0.01" min="0"></div> 
                  <div><label for="dataPagSinalInput">Data Pag. Sinal</label><input type="date" id="dataPagSinalInput"></div> 
                  <div><label for="formaPagSinalInput">Forma Pag. Sinal</label><select id="formaPagSinalInput"><option value="">-- Selecione --</option><option value="PIX">PIX</option><option value="Transferência">Transferência</option><option value="Dinheiro">Dinheiro</option><option value="Cartão">Cartão</option><option value="Outro">Outro</option></select></div> 
              </div>
              <hr> 
       
               <button type="submit" style="width: 100%; padding: 12px; font-size: 18px; background-color: #28a745; color: white;
 border: none; border-radius: 5px; cursor: pointer;"><i class="bi bi-save"></i> Salvar Dados Financeiros</button> 
          </form>
      </div>
  </div>

  <div id="modalRelatorioFinanceiro" class="modal-overlay" style="display: none;">
      <div class="modal-content">
          <span class="modal-close-btn">&times;</span> 
          <h3><i class="bi bi-graph-up"></i> Relatório Financeiro</h3> 
          <div id="relatorioFinanceiroConteudo" class="report-content active"></div> 
          <div style="text-align: right;
 margin-top: 20px;"> 
              <button class="print-btn" ><i class="bi bi-printer"></i> Imprimir</button> 
          </div>
      </div>
  </div>

  <div id="modalControleLimpeza" class="modal-overlay" style="display: none;">
    <div class="modal-content">
        <span class="modal-close-btn">&times;</span> 
        
        <div style="display: flex;
 justify-content: space-between; align-items: center; border-bottom: 1px solid var(--cor-borda); padding-bottom: 10px;
 margin-bottom: 15px;"> 
            <h3 style="border: none; margin: 0;
 padding: 0;"><i class="bi bi-check2-square"></i> Controle de Limpeza</h3> 
            <div style="display: flex;
 gap: 10px;"> 
                <button id="limparMarcacoesBtn" class="print-btn" style="padding: 6px 12px;
 font-size: 14px; margin: 0; background-color: #dc3545; border: none; color: white; border-radius: 8px; cursor: pointer;
 transition: background-color 0.3s;" onmouseover="this.style.backgroundColor='#c82333'" onmouseout="this.style.backgroundColor='#dc3545'"> 
                    <i class="bi bi-x-circle"></i> Limpar Marcações
                </button>
                <button id="enviarLimpezaWhatsAppBtn" class="print-btn" style="padding: 6px 12px;
 font-size: 14px; margin: 0; background-color: #25D366; border: none; color: white; border-radius: 8px; cursor: pointer;
 transition: background-color 0.3s;" onmouseover="this.style.backgroundColor='#128C7E'" onmouseout="this.style.backgroundColor='#25D366'"> 
                    <i class="bi bi-whatsapp"></i> Enviar Lista
                </button>
            </div>
        </div>

        <div id="tabelaLimpezaContainer" class="report-content active">
            <table class="relatorio-financeiro" id="tabelaLimpeza">
           
                 <thead> 
                    <tr>
                        <th>Data</th> 
                        <th>Unidade</th> 
                        <th>Tipo</th> 
   
                         <th>Status</th> 
                    </tr>
                </thead>
                <tbody>
                    </tbody>
       
             </table> 
        </div>
    </div>
  </div>
  <div id="modalAgendarLimpeza" class="modal-overlay" style="display: none;">
    <div class="modal-content">
      <span class="modal-close-btn">&times;</span> 
      <h3><i class="bi bi-magic"></i> Agendar Limpeza Extra/Manual</h3> 
      <form id="formLimpezaExtra">
        <div class="form-financeiro-grid">
            <div>
                <label for="limpezaUnidadeSelect">Unidade:</label> 
       
                 <select id="limpezaUnidadeSelect" required> 
                    <option value="UN01">UN01</option> 
                    <option value="UN02">UN02</option> 
                    <option value="UN03">UN03</option> 
                </select>
          
           </div> 
            <div>
                <label for="limpezaDataInput">Data:</label> 
                <input type="date" id="limpezaDataInput" required> 
            </div>
            <div>
                <label for="limpezaTipoSelect">Tipo:</label> 
         
               <select id="limpezaTipoSelect" required> 
                    <option value="Limpeza Extra">Limpeza Extra</option> 
                    <option value="Manutenção">Manutenção</option> 
                    <option value="Outro">Outro</option> 
                </select>
          
           </div> 
        </div>
        <hr> 
        <button type="submit" style="width: 100%;
 padding: 12px; font-size: 18px; background-color: var(--cor-principal); color: white; border: none; border-radius: 5px;
 cursor: pointer;">Salvar Agendamento</button> 
      </form>
    </div>
  </div>
    <script src="script.js"></script> 

    <script>
      // Verifica se o navegador suporta Service Worker
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/sw.js')
            .then((registration) => {
              console.log('Service Worker registrado com sucesso:', registration.scope);
            })
            .catch((error) => {
              console.log('Falha ao registrar Service Worker:', error);
            });
        });
      }
    </script>
    </body>


</html>